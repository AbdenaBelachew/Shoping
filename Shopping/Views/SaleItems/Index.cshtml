@model IEnumerable<Shopping.Models.SaleItem>
@*@model IEnumerable<Dambali.Models.SaleItem>

    @{
        ViewBag.Title = "Sale Items";
    }

    <h2>Sale Items</h2>

    <table class="table">
        <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Sale Price</th>
            <th>Cost Price</th>
            <th>Line Total</th>
            <th>Date</th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Product.Name</td>
                <td>@item.Quantity</td>
                <td>@item.SalePrice</td>
                <td>@item.CostPrice</td>
                <td>@item.LineTotal</td>
                <td>@item.date.ToString("yyyy-MM-dd HH:mm")</td>
            </tr>
        }
    </table>*@


@{
    ViewBag.Title = "Sale Items";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="text-primary">Sale Items</h2>
        <a href="@Url.Action("Index", "Products")" class="btn btn-outline-secondary">Back to Products</a>
    </div>

    <div class="mb-3">
        <input type="text" id="searchInput" class="form-control" placeholder="Search by product name, quantity, or price...">
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>#</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Sale Price</th>
                    <th>Cost Price</th>
                    <th>Line Total</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Any())
                {
                    int count = 1;
                    foreach (var item in Model)
                    {
                        <tr>
                            <td>@count</td>
                            <td>@item.Product.Name</td>
                            <td>@item.Quantity</td>
                            <td>@item.SalePrice.ToString("C")</td>
                            <td>@item.CostPrice.ToString("C")</td>
                            <td>@item.LineTotal</td>
                            <td>@item.date.ToString("yyyy-MM-dd HH:mm")</td>
                        </tr>
                        count++;
                    }
                }
                else
                {
                    <tr>
                        <td colspan="7" class="text-center text-muted">No sale items found.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#searchInput").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $("#saleTable tbody tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
                });
            });
        });
    </script>
}
