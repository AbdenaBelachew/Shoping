<div class="container mt-5">
    <h3 class="text-center mb-4 fw-bold text-primary">
        <i class="bi bi-graph-up-arrow me-2"></i> Profit & Loss Report
    </h3>

    <div class="row g-4 justify-content-center">

        <!-- Total Revenue Card -->
        <div class="col-md-3">
            <div class="card shadow-lg border-0 rounded-4 text-center p-3" style="background: linear-gradient(135deg, #28a745, #85e085);">
                <div class="card-body">
                    <i class="bi bi-cash-coin fs-2 mb-2 text-white"></i>
                    <h5 class="text-white fw-bold">Total Revenue</h5>
                    <p class="fs-4 fw-bold text-white">@String.Format("{0:C}", ViewBag.TotalRevenue)</p>
                </div>
            </div>
        </div>

        <!-- Total Cost Card -->
        <div class="col-md-3">
            <div class="card shadow-lg border-0 rounded-4 text-center p-3" style="background: linear-gradient(135deg, #ff6a00, #ff7b7b);">
                <div class="card-body">
                    <i class="bi bi-basket3-fill fs-2 mb-2 text-white"></i>
                    <h5 class="text-white fw-bold">Total Expenses</h5>
                    <p class="fs-4 fw-bold text-white">@String.Format("{0:C}", ViewBag.totalExpenses)</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card shadow-lg border-0 rounded-4 text-center p-3" style="background: linear-gradient(135deg, #dc3545, #ff7b7b);">
                <div class="card-body">
                    <i class="bi bi-basket-fill fs-2 mb-2 text-white"></i>
                    <h5 class="text-white fw-bold">Total Cost</h5>
                    <p class="fs-4 fw-bold text-white">@String.Format("{0:C}", ViewBag.TotalCost)</p>
                </div>
            </div>
        </div>

        <!-- Profit Card -->
        <div class="col-md-3">
            <div class="card shadow-lg border-0 rounded-4 text-center p-3" style="background: linear-gradient(135deg, #0d6efd, #6ea0ff);">
                <div class="card-body">
                    <i class="bi bi-graph-up fs-2 mb-2 text-white"></i>
                    <h5 class="text-white fw-bold">Profit</h5>
                    <p class="fs-4 fw-bold text-white">@String.Format("{0:C}", ViewBag.netProfit)</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Optional: Chart below the cards -->
    <div class="mt-5 shadow-lg p-4 rounded-4 d-flex justify-content-center" style="background-color: #f8f9fa;">
        <canvas id="profitLossChart" width="300" height="300" style="max-width: 300px; max-height: 300px;"></canvas>
    </div>


    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    @section scripts {
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
        const ctx = document.getElementById('profitLossChart').getContext('2d');
        const profitLossChart = new Chart(ctx, {
           type: 'doughnut',
            data: {
                labels: ['Revenue', 'Cost', 'Expenses', 'Net Profit'],
                datasets: [{
                    data: [
                        @ViewBag.TotalRevenue, 
                        @ViewBag.TotalCost, 
                        @ViewBag.TotalExpenses,
                        @ViewBag.NetProfit
                    ],
                    backgroundColor: ['#28a745', '#dc3545', '#ff6a00', '#007bff'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
        </script>
    }
